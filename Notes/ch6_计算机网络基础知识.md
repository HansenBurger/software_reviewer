# Ch.6 计算机网络基础知识

分布：上午题
简介：近年考题减少，IP地址难点，其他为记忆点
重点：七层模型、协议、IP地址

## 一、OSI/RM七层模型

七层模型和TCP/IP四层模型的对应关系：

![osi-tcp-ip](https://img-blog.csdnimg.cn/2020033001231337.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Zlc2ZzZWZncw==,size_16,color_FFFFFF,t_70)

OSI七层模型包含（下层为上层提供服务）：

1. 物理层：传送电信号（bit流），用于**集线器**（Hub，物理链路的扩展，存在冲突域）、**中继器**
2. 数据链路层：端对端传送数据**帧**，用于**网桥**、**交换机**（多端口网桥，隔离冲突域，提高利用率，但仍存在同一广播域）
3. 网络层：为传输层提供服务，发送**包**，用于路由器
4. 传输层：为会话层提供透明可靠数据传输服务，发送**段**
5. 会话层：为表示层提供会话服务
6. 表示层：为应用层提供表示（语法转换）服务
7. 应用层：为应用软件和网络通信提供服务

TCP/IP四层模型包含：

1. 网络接口层：数据链路层+物理层（网卡）
2. 网际层（网络层）
3. 运输层
4. 应用层

考法：

1. 设备对应的层次
2. 冲突域（集线器）和广播域（交换机，用**更高层**解决）

## 二、常见的协议

### 2.1 协议族

协议族示意图：

![IPS](https://img.kuaiwenyun.com/images/ueditor/2019-03/112/1-2.png)

内容补充：

1. CSMA/CD：以太网监听冲突检测
2. TokingRing：令牌环，基本淘汰
3. ARP：地址解析器，关联IP和Mac地址，RARP逆向
4. ICMP：测试网络连通性；IGMP：网际消息管理
5. TCP：传输控制协议，三次握手，四次断开，面向连接
6. UDP：不可靠传输协议，面向无连接，开销小
7. DNS/NFS：可能走TCP（DNS服务区域传送）或UDP（域名查询）
8. TCP和UDP对应的**应用层协议常考**

考法：

1. 协议对应的层次

### 2.2 常见协议对应的端口

端口相关内容：

1. TCP、UDP中端口地址均为**16位**（0-65535）
2. 任何TCP实现所提供服务都用1-1023之间的端口，由ICANN管理
3. TCP/IP临时端口号：1024-65535

常用端口号：DNS-53，POP3-110，DHCP-67/68，SMTP-25，HTTP-80，HTTPS-443，TELNET-23，FTP-20/21

协议类型：

1. **网页访问**：HTTP，HTTPS（加密）
2. **电子邮件**：SMTP（简单邮件传输，发），POP3（下载全部邮件），IMAP4（下载文件头，常用），MIME（数据转换），PGP（邮件加密）
3. 远程访问/管理：TELNET（远程管理），RAS（远程访问）
4. 域名、IP地址解析：DNS
5. FTP访问：FTP
6. 轻量目录访问协议：LDAP

> 电子邮件地址：用户名@域名

考法：

1. 常用协议及对应端口号
2. 电子邮件协议

## 三、域名空间

域名空间结构示意图：

![domain](https://pic2.zhimg.com/80/v2-59cf070e13da779b42fa6780bdbece01_1440w.webp)

相关内容补充：

1. 域名根（.）通常省略
2. 顶级域名按照**国家或地区、组织类型**划分：
    1. com-商业机构，net-网络服务机构，org-非营利性组织，gov-政府结构，edu-教育机构，mil-军事机构
    2. cn-中国，tw-台湾地区，hk-香港地区
3. 二级域名通常为各个组织标识
4. www用于代表**主机名**（最前面的代表主机）

考法：

1. 域名构成

## 四、万维网

万维网相关内容：

1. WWW：提供信息服务查询的系统
2. URL：协议: //主机地址[: 端口号]/路径/文件名，服务器端口是协议的标准端口可以省略
3. 浏览器
4. 协议：http-80，https-443

考法：

1. URL地址构成
2. 万维网应用问题（404-页面不存在）

## 五、windows网络相关命令

主要命令：

1. ipconfig：显示TCP/IP相关配置信息
    /all：显示全部（包括mac）
    /flushdns：清空DNS缓存
    /release：释放当前Ip地址
2. tacert：路由排错
3. ping：测试网络连通性（目标设备）
4. route print：显示当前系统中路由表
5. netstat：统计TCP/IP相关连接情况

考法：

1. 相关命令的应用

## 六、IP地址

### 6.1 IPv4
  
IP地址，即每台主机的逻辑标识（唯一）：

1. **网络ID**：表示位于的网段，同一网段内主机网络ID相同
2. **主机ID**：网段内唯一的编号
3. 两者之和的总长度为**32位**
4. 点分十进制：每8位可以用一个十进制表示，并用点号分隔`127.0.0.1`

IPv4中地址示意图：

![IPV4-cate](https://pic3.zhimg.com/80/v2-7103d1a3450a9a329a8dad0bbd05d682_1440w.webp)

1. 划分根据实际应用场景
2. **A类**：网络8位，主机24位，大型网络
3. **B类**：网络16位，主机16位，中型网络
4. **C类**：网络24位，主机8位，小型网络

> 判断网络所属类型，根据**首八位组字节规则**，A：0-126，B：128-191，C：192-233

### 6.2 IP地址掩码

地址掩码：方便计算找到网络位和主机位，和IP地址长度一致

标准地址掩码：

1. A类：255.0.0.0
2. B类：255.255.0.0
3. C类：255.255.255.0

地址掩码表示方法：

1. 点分十进制：255.255.255.0
2. 位奇数：172.21.0.0/24（网络位）可变长地址

网络号：所在网段名称，网络部分+全0主机位

判断网段：**地址和子网掩码**做逻辑**与**运算，判断两个IP是否处于同一网段可以用同一子网掩码做逻辑与

### 6.3 变长子网掩码

变长子网掩码：打破8位一组的界限，避免浪费

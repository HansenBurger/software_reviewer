# Ch1. 计算机系统构成及硬件基础知识

分值：5-6
分布：上午题
简介：考点较多

## 一、数的表示

### 1.1 进制

数的进制包括：十进制（D）、二进制（B）、十六进制（H）、八进制（O/Q）

进制转换的方法：

1. 十进制转其他：**短除法**（除数+余数**倒序**排列）
2. 其他进制转十进制：**按权展开法**（位权*位值并求和 $\sum R^k$）
3. 二进制转十六、八进制：每4/3位二进制表示1位高进制（最高位用0补全）
4. 十六、八进制转二进制：每1位用4/3位二进制表示（**高位补零**）

> 小数用负次位权（一般不考）

地址的大小和转换（内存块）：

1. 位bit
2. 字节Byte（1B=8bit）
3. 字、字长（**不固定**、根据CPU-32/64）
4. B、KB、MB、GB、TB**相邻**间距为 $2^{10}$

考法：

1. 不同数制之间的直接转换
2. 计算内存容量/芯片数量（计算B大小再转换K、M）
3. 直接考察相关概念掌握程度（进制转换、单位转换）

### 1.2 码制

基本概念：

1. 机器码：固定长度的二进制数（第1位**符号**）
2. 机器码的小数位**固定**，不占用数位
3. 原码：任意数转到机器码（符号位**无法**参与运算）
4. 反码：负数数值位按位取反（符号位无法参与运算）
5. 补码：在反码后 **+1**（可以用于符号运算）
6. 移码：在补码**符号位取反**（用于浮点数计算）

数的表示范围：

1. 原码：$-(2^{n-1}-1), 2^{n-1}-1$
2. 反码：$-(2^{n-1}-1), 2^{n-1}-1$
3. 补码（-0无意义）：$-2^{n-1}, 2^{n-1}-1$
4. 移码：$-2^{n-1}, 2^{n-1}-1$

不同码制间的转换方法：

![mazhi](https://img2022.cnblogs.com/blog/1673637/202202/1673637-20220219191810349-638194225.png)

考法：

1. 数的表示范围
2. 各种码值的特点、应用场景

### 1.3 定点数与浮点数

定点数：

1. 定点整数：小数点在**最低**有效位后
2. 定点小数：小数点在**最高**有效位后

浮点数：

1. 表示方法：$N=M\times R^e$
2. 尾数（$M$）、底数（$R=2$，不需保存）、对阶（$e$）
3. 存储方式：阶数（符号+阶码）+尾数（符号+尾数）
4. 计算方法：对阶->尾数计算->结果格式化

> 阶数决定数的**范围**，尾数决定数的**精度**，固定长度下增加任何一方都会导致另一方范围下降

考法：

1. 定点数和浮点数特点

### 1.4 逻辑运算

> 不同系统中逻辑运算符号不同

逻辑运算表：

| $A$ | $B$ | $!A$ | $A+B$ | $A\cdot B$ | $A\bigoplus B$ | $A\bigodot B$ |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0 | 0 | 1 | 0 | 0 | 0 | 1 |
| 0 | 1 | 1 | 0 | 1 | 1 | 0 |
| 1 | 0 | 0 | 0 | 1 | 1 | 0 |
| 1 | 1 | 0 | 1 | 1 | 0 | 1 |

考法：

1. 逻辑运算的应用（符号位运算）

## 二、计算机系统硬件基本组成

### 2.1 CPU的构成*

不同部分和其组成：

1. 冯诺依曼体系：输入设备、运算器、控制器、存储器、输出设备
2. CPU中央处理器：运算器、控制器、**内部总线**、寄存器组
3. **主机**：CPU中央处理器、主存储器（内存）

控制器的**组成**：

1. 程序计数器PC：CPU执行的下一条**指令地址**
2. 指令寄存器IR：保存当前正在执行的指令
3. 指令译码器
4. 时序部件

运算器的**组成**：

1. 算术逻辑单元ALU
2. 累加寄存器：存放**一个**操作数/运算结果
3. 数据缓冲寄存器：存多个操作数/运算结果
4. 状态条件寄存器：保存状态（溢出）

考法：

1. CPU中运算器/控制器的作用
2. CPU中寄存器的作用
3. CPU中运算器/控制器的构成
4. CPU的构成（内部总线）

### 2.2 CPU的性能指标

主要性能指标：

1. 主频：工作频率
2. 字长：同时处理的字长
3. CPU缓存：位于寄存器和内存之间，提升访问速度
4. 核心数量：完整的计算核心

考法：

1. 性能指标

### 2.3 多级存储

多级存储示意图和相关概念：

![cunchu](https://img2018.cnblogs.com/blog/1251433/201906/1251433-20190625165101345-304025919.png)

1. 选择多级存储的原因：平衡**成本、容量、速度**
2. 越往上速度越快，成本越高，容量越小
3. **虚拟**存储器：在外存（辅存）中扩展内存容量

考法：

1. 分级存储的原因
2. 虚拟存储器

### 2.4 存储器分类

按寻址方式分类：随机存储器（内存）、顺序存储器（无地址，磁带）、直接存储器（有地址，磁盘，不同地址块速度不同）

按内容访问：相联存储器

考法：

1. 存储器的分类

### 2.5 Cache

Cache关系示意图：

![Cache](https://ask.qcloudimg.com/http-save/8139881/b5d6d800543cdc73c379a009cdd2b42d.png?imageView2/2/w/1200)

Cache（高速缓存）的作用：

1. **局部性**原理：需要重复访问的数据空间几率较高
2. 提高CPU的性能
3. 命中的数据直接从Cache中获取，未命中的从内存中读取并保存到Cache
4. 具体调度由控制部分完成

考法：

1. Cache的作用

## 三、总线

总线的分类：

1. 位置分类：内部总线（CPU）、系统总线（PCB\PCI）、外部总线（设备）
2. **功能**分类（优先考虑）：
    1. 数据总线：**宽度**和CPU字长相同
    2. 控制总线：控制信号、时序信息
    3. 地址总线：决定系统寻址空间，与**内存**大小有关

总线的性能指标：

1. 带宽：单位时间内传输数据的大小（**MB/s**）
2. 位宽（宽位）:一次传送的**二进制位数**
3. 工作频率

总线复用：通过总线复用，可以**减少总线数量**

考法：

1. 总线的分类
2. 总线的性能指标
3. 总线的复用

## 四、指令

### 4.1 指令

指令的概念：计算机执行某种**操作**的命令，是计算机运行的最小功能单位

指令的组成部分：

1. **操作码**字段：操作的性质（运算、取数）
2. **地址码**字段：数和操作结果存放的结果

寻址方式：

1. **重要**寻址方式：
    1. 立即寻址：地址码存操作数
    2. 直接寻址：地址码存操作数**地址**
    3. 间接寻址：地址码存放**指向**操作数地址的**地址**
    4. 寄存器寻址：直接寻址+寄存器
    5. 寄存器间接寻址：间接寻址+寄存器
2. 补充寻址方式：相对寻址、基址寻址、变址寻址（相对应寄存器+偏移量）

考法：

1. 寻址方式特点

### 4.2 RISC/CISC

精简指令集和复杂指令集的特点：

1. CISC的思想：增强指令功能，软件功能硬件化
2. RISC的思想：减少指令的数量，简化指令功能，降低复杂度，提高速率

|  | CISC（复杂） | RISC（精简） |
| --- | --- | --- |
| 指令 | **数量多**；使用频率差异**大**；变长 | 数量少；使用频率接近；定长；大部分单周期指令；操作寄存器；只有Load/Store操作内存 |
| 寻址方式 | 支持多种 | 支持少量 |
| 实现方式 | 微程序控制技术 | 增加通用寄存器；**硬布线**逻辑控制为主；采用流水线（超流水线技术、超标量技术、超长指令字节技术）
| 其他 |  | 优化编译，有效支持高级语言 |

考法：

1. RISC/CISC的特点

## 五、流水线

概念：多条指令可重叠运行的**准并行**技术

指令的阶段：取指、分析、执行

流水线周期：**时间最长**的阶段作为周期（完成后其他阶段均完成）

流水线计算公式：

1. n条指令的时间：单条指令时间+(n-1)*流水线周期
2. 流水线的吞吐率TP：$TP=n/T_k$（$T_k$：执行n条指令总时间）

考法：

1. 流水线相关计算

## 六、输入输出系统

输入输出：

1. 微机最常用的内存与接口的编址方式：统一编址；分开编址（指令隔离）
2. 直接程序控制：无条件传送；查询方式（CPU查询外设状态，效率低）
3. **中断方式**：通过中断**保存状态**、**延后访问**
    1. 中断响应时间：保存状态再响应请求的时间
    2. 中断向量：找到中断前的任务（存在中断向量表）
4. 直接存储器存取（**DMA**）：CPU**只**在传输开始和结束参与，数据由DMA负责传输
5. 输入输出处理及（IOP）

考法：

1. 各种输入输出特点

## 七、校验码

相关概念：检错、纠错、码距（合法编码距离，影响检错和纠错）

1. 码距为1，无法检错
2. 码距为2，可以检错（1位），无法纠错
3. 码距为3，可以检错（2位），可以纠错（1位）

奇偶校验：

1. 奇校验：增加校验位使1个数为奇
2. 偶校验：增加校验位使1个数为偶
3. 可检错（1位）

CRC循环冗余码：

1. 数据位做**模2除**生成校验位
2. **只能检错**，可以检多位

海明码：

1. 在编码**2的n次**位设置校验位
2. 可检错，**可纠错**（1位、多位）

考法：

1. 各种校验码特点
